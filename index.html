<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Unity Пошаговое изучение</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      background: #1e1e2f;
      font-family: 'Segoe UI', sans-serif;
      color: white;
      display: flex;
      gap: 20px;

      /* Запрет выделения на уровне body */
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -webkit-touch-callout: none;
    }

    .column {
      flex: 1;
      background: #2e2e3e;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      position: relative;
      transition: filter 0.7s ease, opacity 0.7s ease;

      /* Запрет выделения */
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    .blurred {
      filter: blur(4px) brightness(0.6);
      opacity: 0.6;
      pointer-events: none;
    }

    h2 {
      text-align: center;
    }

    pre {
      background: #111;
      padding: 15px;
      border-radius: 8px;
      white-space: pre-wrap;
      word-break: break-word;
      font-family: 'Consolas', monospace;

      /* Запрет выделения и кликов */
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      pointer-events: none;
    }

    .highlight {
      color: #00ff88;
    }

    input[type="text"] {
      padding: 8px;
      margin-top: 10px;
      width: 100%;
      border-radius: 6px;
      border: none;
      font-size: 16px;
      user-select: text; /* для возможности ввода текста в input */
      pointer-events: auto;
    }

    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background: #4caf50;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      user-select: none;
    }

    button:disabled {
      background: #888;
      cursor: not-allowed;
    }

    .controls {
      margin-top: 10px;
    }

    .hidden {
      display: none;
    }
  </style>
</head>

<!-- Блокируем выделение и копирование через атрибуты -->
<body onselectstart="return false" ondragstart="return false" oncopy="return false" oncut="return false" onpaste="return false">

  <!-- Левая колонка -->
  <div class="column" id="left-column">
    <h2>Код 1 (Платформа)</h2>
    <div id="left-code"></div>
    <div class="controls" id="left-controls">
      <input type="text" id="left-password" placeholder="Введите пароль...">
      <button id="left-button" disabled>Открыть следующую часть</button>
    </div>
  </div>

  <!-- Правая колонка -->
  <div class="column blurred" id="right-column">
    <h2>Код 2 (Физика движения)</h2>
    <div id="right-code"></div>
    <div class="controls" id="right-controls">
      <input type="text" id="right-password" placeholder="Введите пароль..." disabled>
      <button id="right-button" disabled>Открыть следующую часть</button>
    </div>
  </div>

  <script>
    // ЛЕВАЯ СТОРОНА
    const leftSteps = [
`public float speed = 5f;
public Transform paddle;
public Vector3 offset = new Vector3(0, 0.5f, 0);
private bool launched = false;

void Start()
{
}

void Update()
{        
}`, 
`public float speed = 5f;
<span class="highlight">private Rigidbody2D rb;</span>
public Transform paddle;
public Vector3 offset = new Vector3(0, 0.5f, 0);
private bool launched = false;

void Start()
{
    <span class="highlight">rb = GetComponent<Rigidbody2D>();</span>
}

void Update()
{
    
}`, 
`public float speed = 5f;
private Rigidbody2D rb;
public Transform paddle;
public Vector3 offset = new Vector3(0, 0.5f, 0);
private bool launched = false;

void Start()
{
    rb = GetComponent<Rigidbody2D>();
}

void Update()
{
    <span class="highlight">if (!launched)</span>
    <span class="highlight">{</span>
        <span class="highlight">transform.position = paddle.position + offset;</span>
    <span class="highlight">}</span>
}`, 
`public float speed = 5f;
private Rigidbody2D rb;
public Transform paddle;
public Vector3 offset = new Vector3(0, 0.5f, 0);
private bool launched = false;

void Start()
{
    rb = GetComponent<Rigidbody2D>();
}

void Update()
{
    if (!launched)
    {
        transform.position = paddle.position + offset;
        <span class="highlight">if (Input.GetKeyDown(KeyCode.Space))</span>
        <span class="highlight">{</span>
        <span class="highlight">}</span>
    }
}`, 
`public float speed = 5f;
private Rigidbody2D rb;
public Transform paddle;
public Vector3 offset = new Vector3(0, 0.5f, 0);
private bool launched = false;

void Start()
{
    rb = GetComponent<Rigidbody2D>();
}

void Update()
{
    if (!launched)
    {
        transform.position = paddle.position + offset;
        if (Input.GetKeyDown(KeyCode.Space))
        {
            <span class="highlight">launched = true;</span>
            <span class="highlight">rb.velocity = Vector2.up * speed;</span>
        }
    }
}`
];

    const leftPasswords = ["ИМШ", "Лагерь", "ИТ", "Лето", "Юнити"];
    let leftStep = 0;
    const leftCodeBlock = document.getElementById("left-code");
    const leftInput = document.getElementById("left-password");
    const leftButton = document.getElementById("left-button");
    const leftControls = document.getElementById("left-controls");
    const rightColumn = document.getElementById("right-column");
    const rightInput = document.getElementById("right-password");

    function updateLeftCode() {
      leftCodeBlock.innerHTML = "<pre>" + leftSteps[leftStep] + "</pre>";
      leftInput.value = "";
      leftButton.disabled = true;
      if (leftStep === leftSteps.length - 1) {
        leftControls.classList.add("hidden");
        rightColumn.classList.remove("blurred");
        rightInput.disabled = false;
      }
    }

    leftInput.addEventListener("input", () => {
      leftButton.disabled = leftInput.value.trim() !== leftPasswords[leftStep];
    });

    leftButton.addEventListener("click", () => {
      if (leftStep < leftSteps.length - 1) {
        leftStep++;
        updateLeftCode();
      }
    });

    updateLeftCode();

    // ПРАВАЯ СТОРОНА
    const rightSteps = [
`public float speed = 10f;
public float boundary = 9f;`,
`public float speed = 10f;
public float boundary = 9f;

<span class="highlight">void Update()</span>
<span class="highlight">{</span>
    <span class="highlight">float input = Input.GetAxis("Horizontal");</span>
    <span class="highlight">Vector3 pos = transform.position;</span>
    <span class="highlight">pos.x += input * speed * Time.deltaTime;</span>
<span class="highlight">}</span>`,
`public float speed = 10f;
public float boundary = 9f;

void Update()
{
    float input = Input.GetAxis("Horizontal");
    Vector3 pos = transform.position;
    pos.x += input * speed * Time.deltaTime;

    <span class="highlight">// Ограничиваем движение влево</span>
    <span class="highlight">if (pos.x < -boundary)</span>
    <span class="highlight">{</span>
        <span class="highlight">pos.x = -boundary;</span>
    <span class="highlight">}</span>
    <span class="highlight">// Ограничиваем движение вправо</span>
    <span class="highlight">else if (pos.x > boundary)</span>
    <span class="highlight">{</span>
        <span class="highlight">pos.x = boundary;</span>
    <span class="highlight">}</span>

    transform.position = pos;
}`
];

    const rightPasswords = ["Условие", "Переменная", "Физика"];
    let rightStep = 0;
    const rightCodeBlock = document.getElementById("right-code");
    const rightButton = document.getElementById("right-button");
    const rightControls = document.getElementById("right-controls");

    function updateRightCode() {
      rightCodeBlock.innerHTML = "<pre>" + rightSteps[rightStep] + "</pre>";
      rightInput.value = "";
      rightButton.disabled = true;
      if (rightStep === rightSteps.length - 1) {
        rightControls.classList.add("hidden");
        // Здесь можно добавить дополнительные действия при полном раскрытии
      }
    }

    rightInput.addEventListener("input", () => {
      rightButton.disabled = rightInput.value.trim() !== rightPasswords[rightStep];
    });

    rightButton.addEventListener("click", () => {
      if (rightStep < rightSteps.length - 1) {
        rightStep++;
        updateRightCode();
      }
    });

    // Правую сторону активируем только после прохождения левой
    rightInput.disabled = true;
    rightButton.disabled = true;

    updateRightCode();

    // Блокировка копирования, выделения, контекстного меню, горячих клавиш
    document.addEventListener('contextmenu', e => e.preventDefault());

    document.addEventListener('mousedown', e => {
      if (e.detail > 1) e.preventDefault(); // Запрет выделения двойным кликом
    });

    document.addEventListener('keydown', e => {
      // Запрет Ctrl/Cmd + C, X, A, U, S
      if ((e.ctrlKey || e.metaKey) && ['c', 'x', 'a', 'u', 's'].includes(e.key.toLowerCase())) {
        e.preventDefault();
      }
      // Запрет F12
      if (e.key === 'F12') {
        e.preventDefault();
      }
    });
  </script>

</body>
</html>
